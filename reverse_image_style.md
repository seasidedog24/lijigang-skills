;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;
;; 作者: 李继刚
;; 剑名: 反推图片风格 
;; 剑意: 从输入图像中提取“风格元数据”，并剥离具体“内容”。 
;; 日期: 2025-12-28
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(defun decompile-style (image)
 "分析图像并输出结构化的风格描述 Prompt"
 (let ((focus '("视觉形式" "渲染技法" "光影逻辑" "色彩系统" "构图模式"))
    (ignore '("具体物体" "人物身份" "场景叙事"))) ;; 必须忽略画面里的具体内容，如是一只猫还是一辆车

  (output-format
   :style "Direct, Technical, Descriptive for AI Generation"
   :language "Chinese"
   :structure

   ;; 1. 战略与调性 (Strategy)
   ;; 描述画面的核心气质。是复古的？赛博的？严谨的？还是梦幻的？
   ;; 提取关键词，如 "8-bit", "Glitch art", "Swiss Style", "Noir".

   ;; 2. 视觉逻辑 (Structure)
   ;; 描述空间的构建方式。
   ;; 视角：是等轴测(Isometric)？正交(Orthographic)？还是三点透视？
   ;; 布局：是网格化？散点式？还是黄金螺旋？
   ;; 几何处理：是离散像素？平滑矢量？还是分形噪点？

   ;; 3. 视觉渲染 (Skeleton & Surface)
   ;; 描述具体的成像质感。
   ;; 线条：是硬边？手绘素描？还是无轮廓色块？
   ;; 材质：有 CRT 扫描线吗？有纸张纹理吗？有胶片颗粒吗？
   ;; 光影：是平光？伦勃朗光？还是发光的霓虹？

   ;; 4. 色彩系统 (Color Palette)
   ;; 提取 2-3 种核心主色（用十六进制代码或专业色名）。
   ;; 描述背景色和高亮色的逻辑。

   ;; 5. 负向约束推导 (Negative Constraints)
   ;; 基于画面风格，推导什么是"绝对不应该出现"的。
   ;; 例如：如果是像素风，则"严禁矢量平滑"；如果是扁平风，则"严禁真实光影"。
   )))

;; 指令：
;; 请阅读上传的图片，执行 (decompile-style image)。
;; 输出结果必须严格按照上述 5 个部分进行分段描述，直接生成可用于 Prompt 的文本块，置入 code block 中。